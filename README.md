# ğŸ“¦ Portfolio API (Fastify) â€” Private Repository

A modern, fast, and well-documented API for a personal portfolio. Built with **Fastify**, **MongoDB (Mongoose)**, and **Swagger UI**, ready for **local development** and **Vercel serverless** deployment. Includes a **contact** endpoint that sends emails via **Gmail (Nodemailer)** using an **App Password**.

> This repository is private. Use it as the backend for a portfolio frontend or any personal site.

---

## âœ¨ Features

- Fast HTTP server with **Fastify**
- **MongoDB** persistence via **Mongoose**
- **Swagger UI** at `/api-docs`
- **Serverless entry** for Vercel at `api/index.js`
- **Email sending** via Gmail (Nodemailer + App Password)
- JSON Schema validation on routes
- Clean controller/service structure
- CORS enabled

---

## ğŸ§± Tech Stack

- Node.js, Fastify, @fastify/swagger, @fastify/swagger-ui, @fastify/cors
- MongoDB Atlas, Mongoose
- Nodemailer (SMTP Gmail)
- dotenv

---

## ğŸ“‚ Project Structure

```
.
â”œâ”€ api/
â”‚  â””â”€ index.js               # Vercel serverless handler (Fastify + routes + Swagger)
â”œâ”€ config/
â”‚  â””â”€ db.config.js           # Mongo URI configuration
â”œâ”€ controllers/              # Business logic per resource
â”œâ”€ models/                   # Mongoose schemas
â”œâ”€ routes/                   # Fastify plugins (per resource) with JSON Schemas
â”œâ”€ server.js                 # Local entry (Fastify + Swagger + Mongo connect)
â””â”€ .env                      # Environment variables (not committed)
```

---

## ğŸ” Environment Variables

Create `.env` in the repo root:

```
# Server
PORT=3000

# MongoDB
MONGO_URI=mongodb+srv://<user>:<pass>@<cluster>/<db>?retryWrites=true&w=majority

# Email (Gmail via App Password)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=465
EMAIL_SECURE=true
EMAIL_USER=your.gmail.address@gmail.com
EMAIL_PASS=your-google-app-password
RECIPIENT_EMAIL=destination@example.com
```

**Notes:**
- `EMAIL_PASS` must be a **Google App Password** (not your regular Gmail password).
- Keep `.env` out of git. Ensure `*.env` is in `.gitignore`.

---

## â–¶ï¸ Run Locally

1) Install dependencies:
```bash
npm install
```

2) Start the API:
```bash
node server.js
```
- API base: `http://localhost:${PORT}`
- Docs: `http://localhost:${PORT}/api-docs`

---

## ğŸ–¥ï¸ Serverless (Vercel)

- Entry file: `api/index.js` (no `listen()` needed)
- Swagger available at `/api-docs`
- Set environment variables in **Vercel Project â†’ Settings â†’ Environment Variables**

**Deploy steps (quick):**
1. Push repo to GitHub (private is fine)
2. Import project in Vercel
3. Add env vars (see above)
4. Deploy

---

## ğŸ”Œ Endpoints

**Base path:** `/api`

| Resource      | Path                    | Methods |
|---------------|--------------------------|---------|
| Profile       | `/profile`               | GET, POST |
| Projects      | `/projects`              | GET, POST |
| Projects      | `/projects/:id`          | GET, PUT, DELETE |
| Projects      | `/projects/category/:c`  | GET |
| Services      | `/services`              | GET, POST |
| Technologies  | `/technologies`          | GET, POST |
| Contact       | `/contact`               | POST |
| Docs          | `/api-docs`              | GET |

> Long descriptions live in Swagger UI. Keep tables to keywords only.

---

## ğŸ“œ Example Requests

**Profile â€” GET**
```bash
curl -s http://localhost:3000/api/profile
```

**Profile â€” POST**
```bash
curl -X POST http://localhost:3000/api/profile   -H "Content-Type: application/json"   -d '{
        "name":"Your Name",
        "title":"Software Engineer",
        "bio":"About me",
        "contactEmail":"you@example.com",
        "linkedin":"https://linkedin.com/in/you",
        "github":"https://github.com/you"
      }'
```

**Projects â€” POST**
```bash
curl -X POST http://localhost:3000/api/projects   -H "Content-Type: application/json"   -d '{
        "title":"Portfolio Site",
        "description":"Static site with SSR",
        "category":"Frontend",
        "imageUrl":"https://.../img.png",
        "projectUrl":"https://..."
      }'
```

**Contact â€” POST (sends email via Gmail)**
```bash
curl -X POST http://localhost:3000/api/contact   -H "Content-Type: application/json"   -d '{
        "name":"Visitor",
        "email":"visitor@example.com",
        "message":"Hello! Great portfolio."
      }'
```

---

## ğŸ§© Swagger

- Auto-generated by `@fastify/swagger`.
- UI served by `@fastify/swagger-ui` at `/api-docs`.
- Route schemas live inside `routes/*.js` near each handler.

---

## âœ‰ï¸ Email via Gmail (Nodemailer)

**Requirements:**
- Google Account with **2â€‘Step Verification** enabled
- A **Google App Password**

**Steps:**
- Generate App Password at: https://myaccount.google.com/apppasswords
- Put it into `.env` as `EMAIL_PASS`
- Keep `EMAIL_SECURE=true` and port `465`

**Mailer code location:**
- `utils/mailer.js` sets up the SMTP transport
- `controllers/contactController.js` imports the transport and sends the message

---

## ğŸ›¡ï¸ Security Checklist

- Do **not** commit `.env`
- Rotate app passwords periodically
- Validate request payloads (already enforced by JSON Schemas)
- Limit origins in CORS if needed
- Harden headers at the reverse proxy (e.g., Vercel defaults are fine)

---

## ğŸ› Troubleshooting

- **Mongo connection fails**: Verify `MONGO_URI`, whitelist IPs in Atlas, network access 0.0.0.0/0 for testing.
- **Swagger UI blank**: Ensure both plugins are registered before routes; check logs.
- **Gmail SMTP error**: Use **App Password**, not account password; keep `secure=true`, port 465.
- **CORS issues**: Adjust `@fastify/cors` config to your frontend origin.
- **Vercel 500**: Confirm env vars on Vercel, and that `api/index.js` exports the async handler.

---

## ğŸ—ºï¸ Maintenance Notes

- Controllers use `reply.code().send()` (Fastify style)
- Models include `{ timestamps: true }`
- Routes group schemas near handlers for clarity
- Serverless handler (`api/index.js`) reuses the same route plugins

---

## ğŸ“¦ Suggested NPM Scripts (optional)

```json
{
  "scripts": {
    "dev": "node server.js",
    "start": "node server.js",
    "lint": "eslint .",
    "format": "prettier --write ."
  }
}
```

> Add ESLint/Prettier configs if needed.

---

## ğŸ“Œ Roadmap

- JWT auth + admin panel
- Rate limit
- Request logging with pino
- Integration tests (Vitest)
- HTML email templates

---

## ğŸ“„ License

This repository is **private**. All rights reserved.
